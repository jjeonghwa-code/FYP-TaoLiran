<ion-header>

  <ion-navbar>
    <ion-title>Chat</ion-title>
  </ion-navbar>

</ion-header>


<ion-content style="text-align: center" padding>
  <div class="balloonContainer" *ngIf="!groupProvider.firstTimeFlag
               &&groupProvider.userGroupId!=null
               &&groupProvider.userGroupId!=''
               &&groupProvider.groupTableInfo[groupProvider.userGroupId]!=null">
    <div class="balloon"
         *ngFor="let memberId of groupProvider.groupTableInfo[groupProvider.userGroupId].members">
      <img src="{{userProvider.userTableInfo[memberId].photoUrl}}">
    </div>

  </div>

  <!--<button ion-button block (click)="publicChat()">Public Chat</button>-->
  <div *ngIf="!groupProvider.firstTimeFlag
               &&groupProvider.userGroupId!=null
               &&groupProvider.userGroupId!=''">
    <ion-item class="transparentBackground selfView" no-lines text-wrap (click)="groupChat()">
      <ion-avatar item-start>
        <img src={{groupProvider.groupTableInfo[groupProvider.userGroupId].photoUrl}}>
      </ion-avatar>
      <h2>{{groupProvider.groupTableInfo[groupProvider.userGroupId].name}}</h2>
      <p>Chat with your teammates!</p>
      <ion-badge color="eeeBlue" *ngIf="chatProvider.newMsgNo[groupProvider.userGroupId]!=0" item-end>
        {{chatProvider.newMsgNo[groupProvider.userGroupId]}}
      </ion-badge>
    </ion-item>
    <button style="margin-top: 10%;" *ngIf="!statusProvider.firstTimeFlag
                  &&(statusProvider.statusTableInfo==null
                  ||statusProvider.statusTableInfo.groups==null
                  ||statusProvider.statusTableInfo.groups[groupProvider.userGroupId]==null
                  ||statusProvider.statusTableInfo.groups[groupProvider.userGroupId].startTime==null
                  ||statusProvider.statusTableInfo.groups[groupProvider.userGroupId].startTime=='')"
            ion-button round outline small (click)="joinGroup()">
      Change Group
    </button>

  </div>

  <button *ngIf="!groupProvider.firstTimeFlag
                &&(groupProvider.userGroupId==null
                ||groupProvider.userGroupId=='')"
          ion-button block (click)="joinGroup()">Join Group
  </button>
</ion-content>
